# 쿠버네티스 아키텍처

![image](https://github.com/user-attachments/assets/ddb3180b-1824-4c48-a533-36389197d75e)

## 쿠버네티스 마스터

* 마스터는 쿠버네티스의 설정 현광 저장 전체 클러스터 관리
* etcd, kube-apiserver, kube-scheduler, kube-controller-manager
* 
### 마스터 컴포넌트
* 클러스터 전체 관리, 컨트롤 플레인(제어) 제공 
* 스케줄링 수행, 이벤트를 감지하고 반응
* 어떠한 머신에서도 동작 가능
* 관리자는 api 서버를 통해 k8s 관리 , 모든 컴포넌트는 api 서버를 통해 통신
### kube-scheduler
* 노드 배정되지 않은 새로생성된 파드 감지 및 선택
* 파드 생성 시 자원을 적절히 할당
* 리소스(요구사항,하드웨어,소프트웨어,정채적 제약),데이터 지역성, 워크로드 간 간섭,데드라인을 포함하여 고려하여 스케줄링

### kube-scheduler
* 컨트롤러 구동하는 마스터

### cloud-controller-manager
* 바탕을 이루는 클라우드 제공사업자와 상호작용

### kube-apiserver
* 쿠버네티스의 모든 요청은 API 서버를 통해 전달
* 수평확장가능, 유효성 검증

### etcd
* 고가용성 제공하는 분산 키-벨류 스토어
* 쿠버네이트에 필요한 모든 데이터를 저장
* 안정성을 위해 분산하여 실행
* 주기적인 백업 필요
* CURL, HTTP, LIB 작업가능

## 쿠버네티스 노드
* 노드는 파드나 컨테이너처럼 쿠버네티스 위에서 동작하는 워크로드 호스팅
* kubelet , kube-proxy (optional), Container runtime
  
### 노드 컴포넌트
* 노드 컴포넌트는 동작중인 파드를 유지하고 쿠버네티스 런타임 환경 제공
* 쿠버네티스에 있어서 워커 머신이며 클러스터에 따라 VM 또는 물리 머신이 될 수 있다.

### kubelet
* AGENT역할
* 각 노드에 존재하며 파드가 정상인지 체크
* 마스터와 통신(POD들과 NODE 상태보고)
* PodSepc 설정 집합을 가지며, 기술된 컨테이너들이 정상 실행 되는지 상태 체크

### kube-proxy
* 클러스트 내 각 노드에서 실행되는 네트워크 프록시
* 각 노드의 쿠버네티스 네트워킹 서비스 반영
* 가상 네트워크 설정하고 관리
* 호스트 상 네트워크 규칙 유지, 연결 포워딩 수행함으로써 쿠버네티스 서비스 추상화
* 서비스 자체에 대한 패킷 전달을 구현하고 Kube-Proxy와 동등한 동작을 제공하는 네트워크 플러그인을 사용하는 경우 클러스터의 노드에서 Kube-Proxy를 실행할 필요가 없습니다.

### 컨테이너 런타임
* 컨테이너 런타임은 실제로 컨테이너 실행
* 가장 많이 알려진 런타임은 DOCKER, RKT, RUNC 런타임 지원
* 컨테이너 표준을 제정하는 역할을 하는OCI의 규격을 구현하고 있는 컨테이너 런타임이면 쿠버네티스 사용가능

## 애드온
### 개념
* 쿠버네티스 리소스(데몬셋,디폴리이먼트 등)를 이용하여 클러스트 기능 구현

### DNS
* 모든 쿠버네티스는 클러스트 cluster Dns를 갖추어야 한다 (DNS 레코드 제공 하는 DNS 서버)

### 웹 UI
* 대시보드 제공, 어플리케이션 관리 및 장애 처리

### 컨테이너 리소스 모니터링
* 중앙 데이터베이스 내에 컨테이너들에 대한 포괄적인 시계열 메트릭스 기록, 그 데이터 열람하기 위한 UI 제공

### 클러스터 레벨 로깅
* 클러스터-레벨 로깅 메커니즘은 검색/열람 인터페이스와 함께 중앙 로그 저장소에 로그 저장

### 네트워크 플러그인
* 

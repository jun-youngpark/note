
# 아파치 하이브란?
하둡 환경에서 복잡한 맵리듀스코드를 sql과 유사한 간단한 hiveql로 처리 가능하게 하고, 파일시스템 저장된 데이터에 catalog,metastore를 제공하여 논리적 데이터베이스,테이블,파티션 제공하여 구조화
**결론적으로 하둡데이터(파일)을 sql로 처리할 수 있게 해줌.**
DW 어플리케이션에 적합


## 맵리듀스(MapReduce)
구글에서 대용량 데이터 처리를 분산 병렬 컴퓨팅에서 처리하기 위한 목적으로 제작한 소프트웨어 프레임워크입니다. 대용량 데이터가 들어오면 적당한 크기의 블록으로 분할하고, 각 블록에 대해 Map Task와 Reduce Task를 진행합니다. 자세한 내용은 맵리듀스에 대한 좋은 포스팅이 있으니 참고 바랍니

# 하이브 구성요소
**1. UI**
  분석가가 쿼리나 기타 작업들을 시스템에 제출하는 인터페이스
**2. Driver**
  쿼리를 입력받고 작업을 처리하는 기능을 수행
**3. Compiler**
  Metastore를 참고하여 쿼리 구문을 분석하고 실행계획을 생성
**4. Metastore**
  하이브에서 사용하는 데이터베이스의 메타 정보들과 HDFS 매핑 정보를 저장
**5. Execution Engine**
  Compiler에 의해 생성된 실행계획을 맵리듀스를 통해 구현하는 엔진
  
![image](https://github.com/user-attachments/assets/760cb2b5-9c0e-4110-b6c0-02e69e8ab1b8)
 출처: https://wikidocs.net/23282  

# 하이브 실행순서
사용자가 커맨드라인을 통해 데이터베이스로 쿼리를 날립니다
드라이버가 컴파일러에게 쿼리플랜을 요청합니다
컴파일러는 메타스토어에서 쿼리를 작성하는 데에 필요한 메타정보를 받습니다
컴파일러가 메타정보를 바탕으로 쿼리를 어떻게 처리할 것인지를 쿼리플랜에 작성하고 드라이버에게 넘깁니다
드라이버는 Execution Engine에게 쿼리플랜을 전달합니다
쿼리플랜을 바탕으로 쿼리가 내부적으로 맵리듀스로 변환되어 작업을 수행합니다
Execution Engine이 맵리듀스 처리결과를 데이터 노드로부터 받고, 드라이버에게 이를 전달합니다.
드라이버는 사용자에게 결과를 전달합니다.
